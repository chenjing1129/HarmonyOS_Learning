import { AppStorageMap, PreferenceUtil, RouterMap, RouterModule } from 'basic';
import { common } from '@kit.AbilityKit';

/**
 * éšç§æ”¿ç­–é¡µé¢Builderå‡½æ•°
 */
@Builder
export function PrivacyPolicyPageBuilder() {
  PrivacyPolicyPage()
}

/**
 * éšç§æ”¿ç­–é¡µé¢ç»„ä»¶
 */
@ComponentV2
struct PrivacyPolicyPage {
  build() {
    NavDestination() {
      Column() {
        // æ ‡é¢˜æ 
        Text('éšç§æ”¿ç­–')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .margin({ top: 48, bottom: 16 })

        // éšç§æ”¿ç­–å†…å®¹
        Scroll() {
          Column({ space: 16 }) {
            Text('æ¬¢è¿ä½¿ç”¨é«˜é€”å­¦ä¹ åº”ç”¨')
              .fontSize(16)
              .fontWeight(FontWeight.Medium)

            Text('æˆ‘ä»¬éå¸¸é‡è§†æ‚¨çš„éšç§ä¿æŠ¤ã€‚æœ¬éšç§æ”¿ç­–å°†å‘ŠçŸ¥æ‚¨æˆ‘ä»¬å¦‚ä½•æ”¶é›†ã€ä½¿ç”¨å’Œä¿æŠ¤æ‚¨çš„ä¸ªäººä¿¡æ¯ã€‚')
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))

            Text('1. ä¿¡æ¯æ”¶é›†')
              .fontSize(15)
              .fontWeight(FontWeight.Medium)

            Text('æˆ‘ä»¬å¯èƒ½æ”¶é›†æ‚¨çš„å­¦ä¹ è®°å½•ã€è¯¾ç¨‹åå¥½ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿ä¸ºæ‚¨æä¾›æ›´å¥½çš„å­¦ä¹ ä½“éªŒã€‚')
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))

            Text('2. ä¿¡æ¯ä½¿ç”¨')
              .fontSize(15)
              .fontWeight(FontWeight.Medium)

            Text('æ‚¨çš„ä¿¡æ¯å°†ä»…ç”¨äºæ”¹å–„æœåŠ¡è´¨é‡ï¼Œæˆ‘ä»¬ä¸ä¼šå‘ç¬¬ä¸‰æ–¹å‡ºå”®æ‚¨çš„ä¸ªäººä¿¡æ¯ã€‚')
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))

            Text('3. ä¿¡æ¯ä¿æŠ¤')
              .fontSize(15)
              .fontWeight(FontWeight.Medium)

            Text('æˆ‘ä»¬é‡‡ç”¨ä¸šç•Œæ ‡å‡†çš„å®‰å…¨æªæ–½ä¿æŠ¤æ‚¨çš„ä¿¡æ¯å®‰å…¨ã€‚')
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))
          }
          .width('100%')
          .alignItems(HorizontalAlign.Start)
        }
        .layoutWeight(1)
        .padding({ left: 16, right: 16 })

        // åº•éƒ¨æŒ‰é’®
        Row({ space: 12 }) {
          Button('å–æ¶ˆ')
            .layoutWeight(1)
            .fontSize(16)
            .fontWeight(FontWeight.Medium)
            .fontColor($r('sys.color.warning'))
            .backgroundColor($r('sys.color.background_secondary'))
            .onClick(() => {
              // è·å–ä¸Šä¸‹æ–‡ï¼šé€šè¿‡getContext(this)è·å–å½“å‰UIAbilityçš„ä¸Šä¸‹æ–‡ï¼Œå¹¶å¼ºåˆ¶è½¬æ¢ä¸ºUIAbilityContextç±»å‹
              // ç»ˆæ­¢åº”ç”¨ï¼šè°ƒç”¨terminateSelf()æ–¹æ³•å…³é—­å½“å‰çš„åº”ç”¨ç¨‹åºå®ä¾‹
              // ç®€å•æ¥è¯´ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨å°±æ˜¯é€€å‡ºå½“å‰åº”ç”¨ç¨‹åºã€‚
              let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
              context.terminateSelf()
            })
          Button('åŒæ„')
            .layoutWeight(1)
            .fontSize(16)
            .fontWeight(FontWeight.Medium)
            .fontColor($r('sys.color.font_on_primary'))
            .backgroundColor($r('sys.color.warning'))
            .onClick(() => {
              // PreferenceUtil.getInstance().put(AppStorageMap.PRIVACY_POLICY_KEY, '1') - å°†éšç§æ”¿ç­–é”®å€¼ä¸º'1'ï¼Œè¡¨ç¤ºç”¨æˆ·å·²åŒæ„éšç§æ”¿ç­–
              // RouterModule.replace(RouterMap.MAIN_PAGE) - è·³è½¬åˆ°ä¸»é¡µé¢ï¼Œæ›¿æ¢å½“å‰è·¯ç”±
              // ğŸ¯å¸¸ç”¨äºç”¨æˆ·åŒæ„éšç§æ”¿ç­–åçš„é¡µé¢è·³è½¬ä»¥çŠ¶æ€ä¿å­˜ã€‚
              PreferenceUtil.getInstance().put(AppStorageMap.PRIVACY_POLICY_KEY, '1')
              RouterModule.replace(RouterMap.MAIN_PAGE)
            })
        }
        .width('100%')
        .padding(16)
      }
      .width('100%')
      .height('100%')
    }
    .hideTitleBar(true)
    .expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.TOP, SafeAreaEdge.BOTTOM])
  }
}

