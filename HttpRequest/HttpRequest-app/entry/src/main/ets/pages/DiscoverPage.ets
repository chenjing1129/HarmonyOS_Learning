/**
 * å‘çŽ°é¡µ
 */
import { ThemeConstants } from '../common/constants/ThemeConstants'
import { ToastUtil } from '../utils/ToastUtil'

// å‘çŽ°å†…å®¹é…ç½®
interface DiscoverItem {
  id: number
  title: string
  desc: string
  icon: string
}

@Component
export struct DiscoverPage {
  // å‘çŽ°å†…å®¹åˆ—è¡¨
  private discoverItems: DiscoverItem[] = [
    { id: 1, title: 'APIæ–‡æ¡£', desc: 'æŸ¥çœ‹å®Œæ•´çš„APIæŽ¥å£æ–‡æ¡£', icon: 'ðŸ“–' },
    { id: 2, title: 'å¼€å‘æŒ‡å—', desc: 'å­¦ä¹ HarmonyOSå¼€å‘æœ€ä½³å®žè·µ', icon: 'ðŸ“š' },
    { id: 3, title: 'ç¤ºä¾‹ä»£ç ', desc: 'æµè§ˆæ›´å¤šç¤ºä¾‹ä»£ç ', icon: 'ðŸ’»' },
    { id: 4, title: 'ç¤¾åŒºäº¤æµ', desc: 'ä¸Žå…¶ä»–å¼€å‘è€…äº¤æµç»éªŒ', icon: 'ðŸ‘¥' },
    { id: 5, title: 'æŠ€æœ¯åšå®¢', desc: 'é˜…è¯»æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹', icon: 'âœï¸' },
    { id: 6, title: 'æ›´æ–°æ—¥å¿—', desc: 'æŸ¥çœ‹æœ€æ–°çš„æ›´æ–°å†…å®¹', icon: 'ðŸ“' }
  ]

  build() {
    Column() {
      // é¡¶éƒ¨æ ‡é¢˜æ 
      this.NavBar()

      // å†…å®¹åŒºåŸŸ
      Scroll() {
        Column({ space: ThemeConstants.SPACE_MD }) {
          // BanneråŒºåŸŸ
          this.BannerSection()

          // å‘çŽ°å†…å®¹ç½‘æ ¼
          this.DiscoverGrid()
        }
        .padding(ThemeConstants.SPACE_MD)
      }
      .layoutWeight(1)
      .backgroundColor(ThemeConstants.BG_PAGE)
    }
    .width('100%')
    .height('100%')
  }

  /**
   * å¯¼èˆªæ 
   */
  @Builder
  NavBar() {
    Row() {
      Text('å‘çŽ°')
        .fontSize(ThemeConstants.FONT_SIZE_LG)
        .fontWeight(FontWeight.Bold)
        .fontColor(ThemeConstants.TEXT_PRIMARY)
    }
    .width('100%')
    .height(ThemeConstants.NAVBAR_HEIGHT)
    .padding({ left: ThemeConstants.SPACE_MD, right: ThemeConstants.SPACE_MD })
    .backgroundColor(ThemeConstants.BG_WHITE)
    .justifyContent(FlexAlign.Start)
    .alignItems(VerticalAlign.Center)
  }

  /**
   * BanneråŒºåŸŸ
   */
  @Builder
  BannerSection() {
    Column() {
      Text('æŽ¢ç´¢æ›´å¤š')
        .fontSize(ThemeConstants.FONT_SIZE_MD + 2)
        .fontWeight(FontWeight.Bold)
        .fontColor(ThemeConstants.TEXT_WHITE)
        .margin({ bottom: ThemeConstants.SPACE_XS })

      Text('å‘çŽ°HarmonyOSçš„æ›´å¤šå¯èƒ½')
        .fontSize(ThemeConstants.FONT_SIZE_XS)
        .fontColor(ThemeConstants.TEXT_WHITE)
        .opacity(0.9)
    }
    .width('100%')
    .height(160)
    .padding(ThemeConstants.SPACE_LG)
    .backgroundColor(ThemeConstants.PRIMARY_COLOR)
    .borderRadius(ThemeConstants.BORDER_RADIUS_MD)
    .justifyContent(FlexAlign.Center)
    .alignItems(HorizontalAlign.Start)
  }

  /**
   * å‘çŽ°å†…å®¹ç½‘æ ¼
   */
  @Builder
  DiscoverGrid() {
    Grid() {
      ForEach(this.discoverItems, (item: DiscoverItem) => {
        GridItem() {
          this.DiscoverCard(item)
        }
      })
    }
    .columnsTemplate('1fr 1fr')
    .rowsGap(ThemeConstants.SPACE_SM)
    .columnsGap(ThemeConstants.SPACE_SM)
    .width('100%')
    .height(450)
  }

  /**
   * å‘çŽ°å¡ç‰‡
   */
  @Builder
  DiscoverCard(item: DiscoverItem) {
    Column({ space: ThemeConstants.SPACE_SM }) {
      Text(item.icon)
        .fontSize(36)

      Text(item.title)
        .fontSize(ThemeConstants.FONT_SIZE_BASE)
        .fontWeight(FontWeight.Medium)
        .fontColor(ThemeConstants.TEXT_PRIMARY)

      Text(item.desc)
        .fontSize(ThemeConstants.FONT_SIZE_XXS)
        .fontColor(ThemeConstants.TEXT_TERTIARY)
        .textAlign(TextAlign.Center)
        .maxLines(2)
        .textOverflow({ overflow: TextOverflow.Ellipsis })
    }
    .width('100%')
    .height(140)
    .padding(ThemeConstants.SPACE_MD)
    .backgroundColor(ThemeConstants.BG_WHITE)
    .borderRadius(ThemeConstants.BORDER_RADIUS_MD)
    .justifyContent(FlexAlign.Center)
    .shadow(ThemeConstants.SHADOW_NORMAL)
    .onClick(() => {
      ToastUtil.info(`ç‚¹å‡»äº†: ${item.title}`)
    })
  }
}
